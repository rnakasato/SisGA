<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<h:body>
		<ui:composition template="/pages/layout/adminLayout.xhtml">
			<ui:define name="head">
				<title>Fornecedores</title>
			</ui:define>
			<h:form >
				<div style="margin: 0 auto; height: 100%; width: 100%;">
					<p:layoutUnit position="top">
						<ui:include src="/resources/template/header.xhtml" />
					</p:layoutUnit>
					<p:breadCrumb style="margin: 0 auto; width: 100%; padding: 2px;">
						<p:menuitem value="Início" url="../../paginaInicial.xhtml" />
						<p:menuitem value="Gestão" url="../menuGestao.xhtml" />
						<p:menuitem value="Fornecedor" url="listarFornecedores.xhtml" />
					</p:breadCrumb>
		
					<div style="margin: 0 auto; min-height: 380px; width: 100%;">
						<div style="margin: 0 auto; width: 100%; height: 50px;"></div>
						<div
							style="margin: 0 auto; width: 95%; height: 100%; float: center;">
							<p:fieldset legend="Fornecedores"
								style="text-align=left; border=1px;">
								
								<p:panelGrid columns="4" border="0">
									<p:outputLabel id="labelFindProvider">Buscar Fornecedor</p:outputLabel>
									<p:inputText 
										id="inputFindProvider" 
										value="#{listarFornecedoresMB.providerFilter.name}" >
									</p:inputText>
									<p:commandButton 
										id="buttonFindProvider"
										update=":form_content:providerDetail :form_content:providerTable" 
										value="Buscar"
										type="submit" 
										action="#{listarFornecedoresMB.find}" />
									<p:commandButton
										id="btnAdd"
										update=":form_content:providerDetail :form_content:providerTable"
										value="Cadastrar"
										actionListener="#{listarFornecedoreMB.add()}"
										oncomplete="PF('providerAddDialog').show()"
										title="Cadastrar">
									</p:commandButton>
								</p:panelGrid>
							</p:fieldset>
							
							<p:dataTable 
								id="providerTable"
								var="provider"
								value="#{listarFornecedoresMB.providers}"
								paginator="true"
								rowKey="#{provider.id}"
								rows="10"
								style="width:100%">
								
								<p:column>
									<f:facet name="header">
										<p:outputText value="Fornecedor" />
									</f:facet>
									<p:outputText value="#{provider.name}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Telefone" />
									</f:facet>
									<p:outputText 
										rendered="#{(provider.telephone.phoneType eq 'TEL')}"
										value="#{provider.telephone.pnumber}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Celular" />
									</f:facet>
									<p:outputText 
										rendered="#{(provider.cellphone.phoneType eq 'CEL')}"
										value="#{provider.cellphone.pnumber}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Operação" />
									</f:facet>
									<p:commandButton
										id="btnUpdate"
										update=":form_content:providerDetail :form_content:providerTable"
										value="Alterar"
										actionListener="#{listarFornecedoreMB.update(provider)}"
										oncomplete="PF('providerUpdateDialog').show()"
										title="Alterar">
									</p:commandButton>
									
									<p:commandButton 
										id="btnDelete" 
										value="Excluir"
										onclick="PF ('confirmDelete').show()"/>
										

									<p:confirmDialog header="Excluir Fornecedor"
										message="Tem certeza que deseja excluir este fornecedor?"
										icon="ui-icon-alert" 
										severity="alert"
										widgetVar="confirmDelete">
													
										<p:commandButton 
											value="Sim" 
											type="button"
											styleClass="ui-confirmdialog-yes" 
											icon="ui-icon-check"
											action="#{listarFornecedoresMB.del(provider)}" 
											update=":form_content:providerDetail :form_content:providerTable"
											oncomplete="PF ('confirmDelete').hide()" />
							
										<p:commandButton 
											value="Não" 
											type="button"
											styleClass="ui-confirmdialog-no" 
											icon="ui-icon-close" 
											oncomplete="PF ('confirmDelete').hide()" />
									</p:confirmDialog>
									
									<p:commandButton
										id="btnDetails"
										update=":form_content:providerDetail :form_content:providerTable"
										value="Ver Detalhes"
										actionListener="#{listarForncedoresMB.details(provider)}"
										oncomplete="PF('providerDetailDialog').show()"
										title="Ver Detalhes">
									</p:commandButton>
											</p:column>
							</p:dataTable>
						</div>
					</div>
		
					<p:layoutUnit position="bottom">
						<ui:include src="/resources/template/bottom.xhtml" />
					</p:layoutUnit>
				<p:layoutUnit position="bottom">
						<ui:include src="/resources/template/bottom.xhtml" />
				</p:layoutUnit>
				</div>
			</h:form>
		</ui:composition>
		
		<ui:define name="adminBreadcumb">
				<p:breadCrumb style="margin: 0 auto; width: 100%; padding: 2px;">
					<p:menuitem value="Início" url="../../paginaInicial.xhtml" />
					<p:menuitem value="Gestão" url="../menuGestao.xhtml" />
					<p:menuitem value="Fornecedores" url="listarFornecedores.xhtml" />
				</p:breadCrumb>
			</ui:define>
		
			<ui:define name="content">
					</ui:define>
	</h:body>
</html>
