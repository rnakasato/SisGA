<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Listar Funcionários</title>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
</h:head>

<h:body>
	<h:form>
		<div style="margin: 0 auto; height: 100%; width: 100%;">
			
			<p:layoutUnit position="top">
				<ui:include src="/resources/template/header.xhtml" />
			</p:layoutUnit>
			
			<p:breadCrumb style="margin: 0 auto; width: 100%; padding: 2px;">
				<p:menuitem value="Início" url="../../paginaInicial.xhtml" />
				<p:menuitem value="Gestão" url="../menuGestao.xhtml" />
				<p:menuitem value="Funcionário" url="listarFuncionarios.xhtml" />
			</p:breadCrumb>

				<div style="margin: 0 auto; min-height: 380px; width: 100%;">
						<div style="margin: 0 auto; width: 100%; height: 50px;"></div>
						<div
							style="margin: 0 auto; width: 95%; height: 100%; float: center;">
							<p:fieldset legend="Funcionários"
								style="text-align=left; border=1px;">
								
								<p:panelGrid columns="4" border="0">
									<p:outputLabel id="labelFindEmployee">Buscar Funcionário</p:outputLabel>
									<p:inputText 
										id="inputFindEmployee" 
										value="#{listarFuncionariosMB.employeeFilter.name}" >
									</p:inputText>
									<p:commandButton 
										id="buttonFindEmployee"
										update=":form_content:employeeDetail :form_content:employeeTable" 
										value="Buscar"
										type="submit" 
										action="#{listarFuncionariosMB.find}" />
									<p:commandButton
										id="btnAdd"
										update=":form_content:employeeDetail :form_content:employeeTable"
										value="Cadastrar"
										actionListener="#{listarFuncionariosMB.add()}"
										oncomplete="PF('employeeAddDialog').show()"
										title="Cadastrar">
									</p:commandButton>
								</p:panelGrid>
								<p:panelGrid columns="5" border="0">
								
									<p:outputLabel> Data de Contratação entre </p:outputLabel>
										<p:calendar id="popupInicio"
											value="#{listarFuncionariosMB.employeeFilter.employmentDateInit}" />
										<p:outputLabel> e </p:outputLabel>
										<p:calendar id="popupFim"
											value="#{listarFuncionariosMB.employeeFilter.employmentDateFinal}" />
										<p:commandButton id="btnClean"
											value="Limpar Filtros" type="submit"
											action="#{listarFuncionariosMB.cleanFilters}" />
								</p:panelGrid>
							</p:fieldset>
								
							<p:dataTable 
								id="employeeTable"
								var="employee"
								value="#{listarFuncionariosMB.employees}"
								paginator="true"
								rowKey="#{employee.id}"
								rows="10"
								style="width:100%">
								
								<p:column>
									<f:facet name="header">
										<p:outputText value="Funcionário" />
									</f:facet>
									<p:outputText value="#{employee.name}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Telefone" />
									</f:facet>
									<p:outputText 
										value="#{employee.telephone.pnumber}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Celular" />
									</f:facet>
									<p:outputText 
										value="#{employee.cellphone.pnumber}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Operação" />
									</f:facet>
									<p:commandButton
										id="btnUpdate"
										update=":form_content:employeeDetail :form_content:employeeTable"
										value="Alterar"
										actionListener="#{listarFuncionariosMB.update(employee)}"
										oncomplete="PF('employeeUpdateDialog').show()"
										title="Alterar">
									</p:commandButton>
									
									<p:commandButton 
										id="btnDelete" 
										value="Excluir"
										onclick="PF ('confirmDelete').show()"/>
										

									<p:confirmDialog header="Excluir Funcionário"
										message="Tem certeza que deseja excluir este funcionário?"
										icon="ui-icon-alert" 
										severity="alert"
										widgetVar="confirmDelete">
													
										<p:commandButton 
											value="Sim" 
											type="button"
											styleClass="ui-confirmdialog-yes" 
											icon="ui-icon-check"
											action="#{listarFuncionariosMB.del(employee)}" 
											update=":form_content:employeeDetail :form_content:employeeTable"
											oncomplete="PF ('confirmDelete').hide()" />
							
										<p:commandButton 
											value="Não" 
											type="button"
											styleClass="ui-confirmdialog-no" 
											icon="ui-icon-close" 
											oncomplete="PF ('confirmDelete').hide()" />
									</p:confirmDialog>
									
									<p:commandButton
										id="btnDetails"
										update=":form_content:employeeDetail :form_content:employeeTable"
										value="Ver Detalhes"
										actionListener="#{listarFuncionariosMB.details(employee)}"
										oncomplete="PF('employeeDetailDialog').show()"
										title="Ver Detalhes">
									</p:commandButton>
											</p:column>
							</p:dataTable>
						</div>
					</div>
										
			<p:layoutUnit position="bottom">
				<ui:include src="/resources/template/bottom.xhtml" />
			</p:layoutUnit>
		</div>
	</h:form>
	
	<ui:define name="adminBreadcumb">
				<p:breadCrumb style="margin: 0 auto; width: 100%; padding: 2px;">
					<p:menuitem value="Início" url="../../paginaInicial.xhtml" />
					<p:menuitem value="Gestão" url="../menuGestao.xhtml" />
					<p:menuitem value="Funcionários" url="listarFornecedores.xhtml" />
				</p:breadCrumb>
			</ui:define>
		
			<ui:define name="content">
					</ui:define>
		
</h:body>

</html>