<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<h:body>
		<ui:composition template="/pages/layout/adminLayout.xhtml">
			<ui:define name="head">
				<title>Clientes</title>
			</ui:define>
			<h:form >
				<div style="margin: 0 auto; height: 100%; width: 100%;">
					<p:layoutUnit position="top">
						<ui:include src="/resources/template/header.xhtml" />
					</p:layoutUnit>
					<p:breadCrumb style="margin: 0 auto; width: 100%; padding: 2px;">
						<p:menuitem value="Início" url="../../paginaInicial.xhtml" />
						<p:menuitem value="Gestão" url="../menuGestao.xhtml" />
						<p:menuitem value="Clientes" url="listarClientes.xhtml" />
					</p:breadCrumb>
		
					<div style="margin: 0 auto; min-height: 380px; width: 100%;">
						<div style="margin: 0 auto; width: 100%; height: 50px;"></div>
						<div
							style="margin: 0 auto; width: 95%; height: 100%; float: center;">
							<p:fieldset legend="Clientes"
								style="text-align=left; border=1px;">
								
								<p:panelGrid columns="4" border="0">
									<p:outputLabel id="labelFindCustomer">Buscar Cliente</p:outputLabel>
									<p:inputText 
										id="inputFindCustomer" 
										value="#{listarClientesMB.customerFilter.name}" >
									</p:inputText>
									<p:commandButton 
										id="buttonFindCustomer"
										update=":form_content:customerDetail :form_content:customerTable" 
										value="Buscar"
										type="submit" 
										action="#{listarClienetesMB.find}" />
									<p:commandButton
										id="btnAdd"
										update=":form_content:customerDetail :form_content:customerTable"
										value="Cadastrar"
										actionListener="#{listarClientesMB.add()}"
										oncomplete="PF('customerAddDialog').show()"
										title="Cadastrar">
									</p:commandButton>
							</p:panelGrid>
							<p:panelGrid columns="4" border="0">
									<p:outputLabel id="labelStatus">Status  </p:outputLabel>
									<p:selectOneRadio id="selectRadioStatus"  value="##{listarClientesMB.customerFilter.status }">
										<f:selectItem id="selectRadioStatusTodos" itemLabel="Todos"
											itemValue= "TODOS" />
										<f:selectItem id="selectRadioStatusAtivo" itemLabel="Ativo"
											itemValue= "ATIVO" />
										<f:selectItem id="selectRadioStatusInativo" itemLabel="Inativo"
											itemValue= "INATIVO" />
									</p:selectOneRadio>
									<p:commandButton
										id="btnClean"
										value="Limpar Filtros"
										action="#{listarClientesMB.cleanFilters()}">
									</p:commandButton>
									<br />
								</p:panelGrid>
							</p:fieldset>
							
							<p:dataTable 
								id="customerTable"
								var="customer"
								value="#{listarClientesMB.customers}"
								paginator="true"
								rowKey="#{customer.id}"
								rows="10"
								style="width:100%">
								
								<p:column>
									<f:facet name="header">
										<p:outputText value="Cliente" />
									</f:facet>
									<p:outputText value="#{listarClientesMB.customer.name}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Status" />
									</f:facet>
									<p:outputText 
										rendered="#{(customer.active)}"
										value="ATIVO" />
									<p:outputText 
										rendered="#{not (customer.active)}"
										value="INATIVO" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Telefone" />
									</f:facet>
									<p:outputText 
										rendered="#{(customer.telephone.phoneType eq 'TEL')}"
										value="#{customer.telephone.pnumber}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Celular" />
									</f:facet>
									<p:outputText 
										rendered="#{(provider.cellphone.phoneType eq 'CEL')}"
										value="#{provider.cellphone.pnumber}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<p:outputText value="Operação" />
									</f:facet>
									<p:commandButton
										id="btnUpdate"
										update=":form_content:customerDetail :form_content:customerTable"
										value="Alterar"
										actionListener="#{listarClientesMB.update(customer)}"
										oncomplete="PF('customerUpdateDialog').show()"
										title="Alterar">
									</p:commandButton>
									
									<p:commandButton 
										id="btnDelete" 
										value="Excluir"
										onclick="PF ('confirmDelete').show()"/>
										

									<p:confirmDialog header="Excluir Cliente"
										message="Tem certeza que deseja excluir este cliente?"
										icon="ui-icon-alert" 
										severity="alert"
										widgetVar="confirmDelete">
													
										<p:commandButton 
											value="Sim" 
											type="button"
											styleClass="ui-confirmdialog-yes" 
											icon="ui-icon-check"
											action="#{listarClientesMB.del(customer)}" 
											update=":form_content:customerDetail :form_content:customerTable"
											oncomplete="PF ('confirmDelete').hide()" />
							
										<p:commandButton 
											value="Não" 
											type="button"
											styleClass="ui-confirmdialog-no" 
											icon="ui-icon-close" 
											oncomplete="PF ('confirmDelete').hide()" />
									</p:confirmDialog>
									
									<p:commandButton
										id="btnDetails"
										update=":form_content:customerDetail :form_content:customerTable"
										value="Ver Detalhes"
										actionListener="#{listarClientesMB.details(customer)}"
										oncomplete="PF('customerDetailDialog').show()"
										title="Ver Detalhes">
									</p:commandButton>
											</p:column>
							</p:dataTable>
						</div>
					</div>
		
					<p:layoutUnit position="bottom">
						<ui:include src="/resources/template/bottom.xhtml" />
					</p:layoutUnit>
		
				</div>
		
			</h:form>
		
		
			<ui:define name="adminBreadcumb">
				<p:breadCrumb style="margin: 0 auto; width: 100%; padding: 2px;">
					<p:menuitem value="Início" url="../../paginaInicial.xhtml" />
					<p:menuitem value="Gestão" url="../menuGestao.xhtml" />
					<p:menuitem value="Clientes" url="listarClientes.xhtml" />
				</p:breadCrumb>
			</ui:define>
		
			<ui:define name="content">
					</ui:define>
		
		</ui:composition>
	</h:body>
</html>